---
title: Copying blobs from a storage account into an Azure Media Services asset | Microsoft Docs
description: This topic shows how to copy an existing blob into a Media Services Asset. The example uses Azure Media Services .NET SDK Extensions. 
services: media-services
documentationcenter: ''
author: Juliako
manager: erikre
editor: ''

ms.assetid: 6a63823f-f3c9-424c-91b8-566f70bec346
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: ne
ms.topic: article
ms.date: 01/31/2017
ms.author: juliako

---
# Copying existing blobs into a Media Services Asset
This topic shows how to copy blobs from a storage account into a new Microsoft Azure Media Services asset using [Azure Media Services .NET SDK Extensions](https://github.com/Azure/azure-sdk-for-media-services-extensions/).

This extension method works with:

- Regular assets.
- Live archive assets (FragBlob format).
- Source and destination assets belonging to different Media Services accounts (even across different data centers). However, there may be charges incurred by doing so. For more information about pricing, see [Data Transfers](https://azure.microsoft.com/pricing/#header-11).

> [!NOTE]
> You should not attempt to change the contents of blob containers that were generated by Media Services without using Media Service APIs.
> 

## Download sample
You can follow the steps in this article or you can download a sample that contains the code described in this article from [here](https://azure.microsoft.com/documentation/samples/media-services-dotnet-copy-blob-into-asset/).

## Prerequisites
* Two Media Services accounts in a new or existing Azure subscription. See the topic [How to Create a Media Services Account](media-services-portal-create-account.md).
* Operating Systems: Windows 10, Windows 7, Windows 2008 R2, or Windows 8.
* .NET Framework 4.5.
* Visual Studio 2010 SP1 (Professional, Premium, Ultimate, or Express) or later.

## Set up your project
In this section you will create and set up a C# Console Application project.

1. Use Visual Studio to create a new solution that contains the C# Console Application project. 
2. Enter CopyExistingBlobsIntoAsset for the Name and then click OK.
3. Use [NuGet](https://www.nuget.org/packages/windowsazure.mediaservices.extensions) to install and add Azure Media Services .NET SDK Extensions (windowsazure.mediaservices.extensions). Installing this package, also installs Media Services .NET SDK and adds all other required dependencies.
4. Add other references that are required for this project: System.Configuration.
6. Add the appSettings section to the .config file and update the values based on your Media Services accounts, the destination storage account and the source asset ID. 
   
		<appSettings>
	          <add key="MediaServicesSourceAccountName" value="name"/>
	          <add key="MediaServicesSourceAccountKey" value="key"/>
	          <add key="MediaServicesDestAccountName" value="name"/>
	          <add key="MediaServicesDestAccountKey" value="key"/>
	          <add key="DestStorageAccountName" value="name"/>
	          <add key="DestStorageAccountKey" value="key"/>
	          <add key="SourceAssetID" value="nb:cid:UUID:assetID"/>       
		</appSettings>

## Copy blobs from a storage account into a Media Services asset

The following code uses extension **IAsset.Copy** method to copy all files in the source asset into the destination asset using a single extension. There is an additional overload with async support.

Replace the code in your Program.cs class with the following code:

	using System;
	using System.Linq;
	using System.Configuration;
	using Microsoft.WindowsAzure.MediaServices.Client;
	using Microsoft.WindowsAzure.Storage.Auth;
	
	namespace CopyExistingBlobsIntoAsset
	{
	    class Program
	    {
	        static string _sourceAaccountName = ConfigurationManager.AppSettings["MediaServicesSourceAccountName"];
	        static string _sourceAccountKey = ConfigurationManager.AppSettings["MediaServicesSourceAccountKey"];
	        static string _destAccountName = ConfigurationManager.AppSettings["MediaServicesDestAccountName"];
	        static string _destAccountKey = ConfigurationManager.AppSettings["MediaServicesDestAccountKey"];
	        static string _destStorageAccountName = ConfigurationManager.AppSettings["DestStorageAccountName"];
	        static string _destStorageAccountKey = ConfigurationManager.AppSettings["DestStorageAccountKey"];
	        static string _sourceAssetID = ConfigurationManager.AppSettings["SourceAssetID"];
	        
	
	        private static CloudMediaContext _sourceContext = null;
	        private static CloudMediaContext _destContext = null;
	
	        static void Main(string[] args)
	        {
	            // Create the context for your source Media Services account.
	
	            // Use the cached credentials to create CloudMediaContext.
	            _sourceContext = new CloudMediaContext(new MediaServicesCredentials(
	                _sourceAaccountName,
	                _sourceAccountKey));

	            // Create the context for your destination Media Services account.
	            _destContext = new CloudMediaContext(new MediaServicesCredentials(
	                _destAccountName,
	                _destAccountKey));
	
	            // Get the credentials of the default Storage account bound to your destination Media Services account.
	            StorageCredentials destinationStorageCredentials =
	                new StorageCredentials(_destStorageAccountName, _destStorageAccountKey);
	
	            // Get a reference to the source asset in the source context.
	            IAsset sourceAsset = _sourceContext.Assets.Where(a => a.Id == _sourceAssetID).First();
	
	            // Create an empty destination asset in the destination context.
	            IAsset destinationAsset = _destContext.Assets.Create(sourceAsset.Name, AssetCreationOptions.None);
	
	            // Copy the files in the source asset instance into the destination asset instance.
				// There is an additional overload with async support.
	            sourceAsset.Copy(destinationAsset, destinationStorageCredentials);

				
	        }
	    }
	}


## Media Services learning paths
[!INCLUDE [media-services-learning-paths-include](../../includes/media-services-learning-paths-include.md)]

## Provide feedback
[!INCLUDE [media-services-user-voice-include](../../includes/media-services-user-voice-include.md)]

